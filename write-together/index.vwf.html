<link rel="stylesheet" href="css/bootstrap/bootstrap.css"></link>
<link rel="stylesheet" href="css/application.css"></link>

<script src="js/bootstrap.js" type="text/javascript"></script>

<script type="text/javascript">
  $(function(){
    // Horrible hack to set the page to be white
    $('html').css('backgroundColor', '#f1f1f1');
    $('.full-screen').parent().css('backgroundColor', '#f1f1f1');

    vwf_view.satProperty = function (nodeId, propertyName, propertyValue) {
      // If I'm the one who set the property, then ignore the change?
      console.log("Other changed content to: " + propertyValue);
      var editorNodeId = vwf_view.kernel.find('', '/editor');

      if ( nodeId == editorNodeId[0] ) {
        switch ( propertyName ) {
          case "content":
            $("#doc-content").val(propertyValue);
            break;
          case "title":
            $("#doc-title").val(propertyValue);
            break;
        }
      }
    }

    $('#doc-content').on('input propertychange', function() {
      console.log("I changed content to: " + $(this).val());
      var editorNodeId = vwf_view.kernel.find('', '/editor');
      vwf_view.kernel.setProperty( editorNodeId[0], "content", $(this).val());
    });

    $('#doc-title').on('input propertychange', function() {
      console.log("I changed title to: " + $(this).val());
      var editorNodeId = vwf_view.kernel.find('', '/editor');
      vwf_view.kernel.setProperty( editorNodeId[0], "title", $(this).val());
    });
  });
</script>

<div id="wrap" class="full-screen">
  <div id="title-row" class="row-fluid">
    <div class="span8">
      <button class="close">&times;</button>
      <input id="doc-title" type="text" placeholder="Document title">
    </div>
  </div>
  <div class="row-fluid">
    <div class="span8">
      <textarea id="doc-content" class="write-together-editor" rows="10">Yo mama</textarea>
    </div>
    <div class="span4 collaborators">
      <h4 class="collaborator-title">Collaborators</h2>
      <ul id="collaborator-list" class="unstyled">
        <li>
          Jess Martin
        </li>
        <li>
          Eric Burns
        </li>
      </ul>
    </div>
  </div>
</div>
