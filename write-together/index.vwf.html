<link rel="stylesheet" href="css/application.css"></link>

<script type="text/javascript">
  $(function(){
    // Horrible hack to set the page to be white
    $('html').css('backgroundColor', '#fff');
    $('div').css('backgroundColor', '#fff');

    vwf_view.satProperty = function (nodeId, propertyName, propertyValue) {
      // If I'm the one who set the property, then ignore the change
      console.log("Other changed content to: " + propertyValue);
      var editorNodeId = vwf_view.kernel.find('', '/editor');

      if ( nodeId == editorNodeId[0] ) {
        switch ( propertyName ) {
          case "content":
            $(".write-together-editor").val(propertyValue);
            break;
        }
      }
    }

    $('.write-together-editor').on('input propertychange', function() {
      console.log("I changed content to: " + $(this).val());
      var editorNodeId = vwf_view.kernel.find('', '/editor');
      vwf_view.kernel.setProperty( editorNodeId[0], "content", $(this).val());
    });
  });
</script>

<div class="container full-screen">
  <div class="row">
    <h1>Write Together</h1>
    <textarea class="write-together-editor" rows="10">Yo mama</textarea>
  </div>
</div>
