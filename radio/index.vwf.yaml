--- 
extends: http://vwf.example.com/types/glge
source: radio.xml
type: model/x-glge
properties:
  ambientColor: [ 183, 183, 183 ]
  activeCamera: "http-vwf-example-com-types-camera-maincamera"
children: 
  radio.dae: 
    extends: http://vwf.example.com/types/node3
    properties:
      position: [ 0, 4, 0 ]
      eulers: [ 338, 0, 211 ]
      powerOn:
        set: |
          this.powerOn = value;
          if ( value ) {
            this.menuMode = "channel";
          } else { 
            this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD.png";
          } 
        value: false
      volume:
        set: |
          if ( value >= 0 ){
            if ( this.volume == 0 && value != 0 ) {
              this.powerOn = true;
            } else if ( this.volume != 0 && value == 0 ) {
              this.powerOn = false;
            }
            this.volume = value;
          }
        value: 0
      speak: "up"
      channel:
        set: |
          if ( !this.powerOn ) return;
          switch( value ) {
            case 1:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan1_Gon_Von.png";
              this.channel = value;
              break;
            case 2:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan2_Gon_Von.png";
              this.channel = value;
              break;
            case 3:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan3_Gon_Von.png";
              this.channel = value;
              break;
            case 4:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan4_Gon_Von.png";
              this.channel = value;
              break;
            case 5:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan5_Gon_Von.png";
              this.channel = value;
              break;
            case 6:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan6_Gon_Von.png";
              this.channel = value;
              break;
            case 7:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan7_Gon_Von.png";
              this.channel = value;
              break;
            case 8:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan8_Gon_Von.png";
              this.channel = value;
              break;
            case 9:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan9_Gon_Von.png";
              this.channel = value;
              break;
            case 10:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan10_Gon_Von.png";
              this.channel = value;
              break;
            case 11:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan11_Gon_Von.png";
              this.channel = value;
              break;
            case 12:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan12_Gon_Von.png";
              this.channel = value;
              break;
            case 13:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan13_Gon_Von.png";
              this.channel = value;
              break;
            case 14:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan14_Gon_Von.png";
              this.channel = value;
              break;
            case 15:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan15_Gon_Von.png";
              this.channel = value;
              break;
            case 16:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Chan16_Gon_Von.png";
              this.channel = value;
              break;
          }
        value: 1
      headphones: false
      anteanna:
        set: |
          if ( value ) {
            this.bone1.MaxScene.Radio.playing = !value;
          } else {
            console.info( "replace the anteanna" );
          }
          this.anteanna = value;
        value: true
      battery: true
      batteryCover: true 
      beltClip: true
      menuMode:
        set: |
          if ( !this.powerOn ) return;
          switch( value ) {
            case "channel":
              this.channel = this.channel;
              this.menuMode = value;
              break;
            case "backLight":
              this.backLightMode = this.backLightMode;
              this.menuMode = value;
              break;
            case "squelch":
              this.squelch = this.squelch;
              this.menuMode = value;
              break;
            case "beep":
              this.beepOn = this.beepOn;
              this.menuMode = value;
              break;
          }
        value: "none"
      backLightMode:
        set: |
          if ( !this.powerOn ) return;
          switch(value) {
            case "auto":
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_LIGT_AUTO_Gon_Von.png";
              this.backLightMode = value;
              break;
            case "off":
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_LIGT_OFF_Gon_Von.png";
              this.backLightMode = value;
              break;
            case "on":
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_LIGT_ON_Gon_Von.png";
              this.backLightMode = value;
              break;
          }
        value: "auto"
      beepOn:
        set: |
          if ( !this.powerOn ) return;
          if ( value ) {
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_BEEP_ON_Gon_Von.png";
              this.beepOn = value;
          } else {
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_BEEP_OFF_Gon_Von.png";
              this.beepOn = value;
          }
        value: true
      squelch:
        set: |
          if ( !this.powerOn ) return;
          switch(value) {
            case 20:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_SQL20_Gon_Von.png";
              this.squelch = value;
              break;
            case 30:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_SQL30_Gon_Von.png";
              this.squelch = value;
              break;
            case 40:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_SQL40_Gon_Von.png";
              this.squelch = value;
              break;
            case 50:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_SQL50_Gon_Von.png";
              this.squelch = value;
              break;
            case 60:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_SQL60_Gon_Von.png";
              this.squelch = value;
              break;
            case 70:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_SQL70_Gon_Von.png";
              this.squelch = value;
              break;
            case 80:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_SQL80_Gon_Von.png";
              this.squelch = value;
              break;
            case 90:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_SQL90_Gon_Von.png";
              this.squelch = value;
              break;
            case 100:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_SQL100_Gon_Von.png";
              this.squelch = value;
              break;
            case 110:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_SQL110_Gon_Von.png";
              this.squelch = value;
              break;
          }
        value: 20
      encryptionOn:
        set: |
          if ( !this.powerOn ) return;
          if ( value ) {
            this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD7_Scrambler_Gon_Von.png";
              this.encryptionOn = value;
          } else { 
            this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD7_Scrambler_Gon_Voff.png";
              this.encryptionOn = value;
          } 
          this.encryptionOn = value;
        value: false
      transmitPower:
        set: |
          if ( !this.powerOn ) return;
          switch ( value ){
            case 4:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Blank_Gon_Voff.png";
              this.transmitPower = value;
              break;
            case 2:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Low2_Gon_Von.png";
              this.transmitPower = value;
              break;
            case 1:
              this.bone1.MaxScene.Radio.LCD.LCDMaterial1.texture = "images/LCD12_Low1_Gon_Von.png";
              this.transmitPower = value;
              break;
          }
        value: 4
      keysLocked: false
    scripts: 
    - text: |
        var radio = this;
        this.configSave = function(){
        }
        this.red = function() {
          console.info( '=====||====== radio.dae.red()' );
          if ( radio.keysLocked ) return;
          switch( radio.menuMode ) {
            case 'channel':
              radio.menuMode = 'backLight';
              break;
            case 'backLight':
              radio.menuMode = 'squelch';
              break;
            case 'squelch':
              radio.menuMode = "beep";
              break;
            case 'beep':
              radio.configSave();
              radio.menuMode = 'channel';
              break;
          }
        }
        this.up = function() {
          switch( radio.menuMode ) {
            case "backLight":
              if ( radio.backLightMode == "on" )
                radio.backLightMode = "auto";
              else if ( radio.backLightMode == "auto")
                radio.backLightMode = "off";
              else
                radio.backLightMode = "on";
              break;
            case "squelch":
              if ( radio.squelch <= 100 )
                radio.squelch = radio.squelch + 10;
              break;
            case "beep":
              radio.beepOn = !radio.beepOn;
              break;
          }
        }
        this.down = function() {
          switch( radio.menuMode ) {
            case "backLight":
              if ( radio.backLightMode == "on" )
                radio.backLightMode = "auto";
              else 
                radio.backLightMode = "on";
              break;
            case "squelch":
              if ( radio.squelch >= 30 )
                radio.squelch = radio.squelch - 10;
              break;
            case "beep":
              radio.beepOn = !radio.beepOn;
              break;
          }
        }
        this.p0 = function() {
          if ( radio.keysLocked ) return;
          switch( radio.menuMode ){
            case "channel":
              radio.encryptionOn = !radio.encryptionOn;
              break;
          }
        }
        this.p1 = function() {
          if ( radio.keysLocked ) return;
        }
        this.p2 = function() {
          if ( radio.keysLocked ) return;
          if ( radio.menuMode == "channel" ){
            if ( !radio.settingTransmitPower ){
              radio.settingTransmitPower = true;
            } else {
              switch ( radio.transmitPower ){
                case 4:
                  radio.transmitPower = 2;
                  break;
                case 2:
                  radio.transmitPower = 1;
                  break;
                case 1:
                  radio.transmitPower = 4;
                  break;
              }
            }
          }
        }
        this.p3 = function() {
          radio.keysLocked = !radio.keysLocked;
        }
        this.ptt = function() {
          if ( radio.keysLocked ) return;
        }
      type: application/javascript
    children:
      bone1:
        extends: http://vwf.example.com/types/node3
        children:
          MaxScene:
            extends: http://vwf.example.com/types/node3
            children:
              EnvironmentAmbientLight:
                extends: http://vwf.example.com/types/node3
              Radio:
                extends: http://vwf.example.com/types/node3
                properties: 
                  playing: false
                  looping: false
                  speed: 1
                children:
                  ic40_MicrophonePort:
                    extends: http://vwf.example.com/types/node3
                    children:
                      bone6:
                        extends: http://vwf.example.com/types/node3
                        children:
                          bone6Material1:
                            extends: http://vwf.example.com/types/material
                  ic40_SpeakerPort:
                    extends: http://vwf.example.com/types/node3
                    children:
                      bone8:
                        extends: http://vwf.example.com/types/node3
                        children:
                          bone8Material1:
                            extends: http://vwf.example.com/types/material
                  ic40Channel:
                    extends: http://vwf.example.com/types/node3
                    scripts:
                    - text: |
                        this.channelDirectionUp = true; 
                        this.pointerClick = function()  {
                          console.info( "=====||====== ic40Channel.pointerClick()" );
                          var currentChannel = this.parent.parent.parent.parent.channel;
                          if ( this.channelDirectionUp && currentChannel < 16 ) {
                            this.parent.parent.parent.parent.channel = currentChannel + 1;
                            this.rotZ = this.rotZ - 10;
                            if ( this.parent.parent.parent.parent.channel == 16 )
                              channelDirectionUp = false;
                          } else {
                            this.parent.parent.parent.parent.channel = currentChannel - 1;
                            this.rotZ = this.rotZ + 10;
                            if ( this.parent.parent.parent.parent.channel == 1 )
                              channelDirectionUp = true;
                          }
                        }
                      type: application/javascript
                    properties:
                      rotZ: 0
                    children:
                      ic40ChannelMaterial1:
                        extends: http://vwf.example.com/types/material
                      ic40ChannelMaterial2:
                        extends: http://vwf.example.com/types/material
                  ic40Down:
                    extends: http://vwf.example.com/types/node3
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info( "=====||====== ic40Down.pointerClick()" );
                          this.parent.parent.parent.parent.down();
                        }
                      type: application/javascript
                    children:
                      ic40DownMaterial1:
                        extends: http://vwf.example.com/types/material
                      ic40DownMaterial2:
                        extends: http://vwf.example.com/types/material
                  ic40Monitor:
                    extends: http://vwf.example.com/types/node3
                    children:
                      ic40MonitorMaterial1:
                        extends: http://vwf.example.com/types/material
                      ic40MonitorMaterial2:
                        extends: http://vwf.example.com/types/material
                  ic40P0:
                    extends: http://vwf.example.com/types/node3
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info( "=====||====== ic40P0.pointerClick()" );
                          this.parent.parent.parent.parent.p0();
                        }
                      type: application/javascript
                    children:
                      ic40P0Material1:
                        extends: http://vwf.example.com/types/material
                      ic40P0Material2:
                        extends: http://vwf.example.com/types/material
                  ic40P1:
                    extends: http://vwf.example.com/types/node3
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info( "=====||====== ic40P1.pointerClick()" );
                          this.parent.parent.parent.parent.p1();
                        }
                      type: application/javascript
                    children:
                      ic40P1Material1:
                        extends: http://vwf.example.com/types/material
                      ic40P1Material2:
                        extends: http://vwf.example.com/types/material
                  ic40P2:
                    extends: http://vwf.example.com/types/node3
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info( "=====||====== ic40P2.pointerClick()" );
                          this.parent.parent.parent.parent.p2();
                        }
                      type: application/javascript
                    children:
                      ic40P2Material1:
                        extends: http://vwf.example.com/types/material
                      ic40P2Material2:
                        extends: http://vwf.example.com/types/material
                  ic40P3:
                    extends: http://vwf.example.com/types/node3
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info( "=====||====== ic40P3.pointerClick()" );
                          this.parent.parent.parent.parent.p3();
                        }
                      type: application/javascript
                    children:
                      ic40P3Material1:
                        extends: http://vwf.example.com/types/material
                      ic40P3Material2:
                        extends: http://vwf.example.com/types/material
                  ic40PTT:
                    extends: http://vwf.example.com/types/node3
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info( "=====||====== ic40PTT.pointerClick()" );
                          this.parent.parent.parent.parent.ptt();
                        }
                      type: application/javascript
                    children:
                      bone17:
                        extends: http://vwf.example.com/types/node3
                        children:
                          bone17Material1:
                            extends: http://vwf.example.com/types/material
                          bone17Material2:
                            extends: http://vwf.example.com/types/material
                  ic40Red:
                    extends: http://vwf.example.com/types/node3
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info( "=====||====== ic40Red.pointerClick()" );
                          this.parent.parent.parent.parent.red();
                        }
                      type: application/javascript
                    children:
                      ic40RedMaterial1:
                        extends: http://vwf.example.com/types/material
                        properties:
                          texture: ""
                  ic40Up:
                    extends: http://vwf.example.com/types/node3
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info( "=====||====== ic40Up.pointerClick()" );
                          this.parent.parent.parent.parent.up();
                        }
                      type: application/javascript
                    children:
                      ic40UpMaterial1:
                        extends: http://vwf.example.com/types/material
                      ic40UpMaterial2:
                        extends: http://vwf.example.com/types/material
                  ic40Volume:
                    extends: http://vwf.example.com/types/node3
                    properties:
                      rotZ: 0
                    scripts:  
                    - text: | 
                        this.pointerClick = function()  {
                          console.info( "=====||====== ic40Volume.pointerClick()" );
                          if ( this.rotZ == 0 ) {
                            this.parent.parent.parent.parent.volume = 10;
                            this.rotZ = 120;
                          } else {
                            this.parent.parent.parent.parent.volume = 0;
                            this.rotZ = 0;
                          }
                        }
                      type: application/javascript
                    children:
                      ic40VolumeMaterial1:
                        extends: http://vwf.example.com/types/material
                        properties:
                          texture: ""
                      ic40VolumeMaterial2:
                        extends: http://vwf.example.com/types/material
                        properties:
                          texture: ""
                  LCD:
                    extends: http://vwf.example.com/types/node3
                    properties:
                      position: [0, 0, 0]
                    children:
                      LCDMaterial1:
                        extends: http://vwf.example.com/types/material
                        properties:
                          texture: ""
                  LCD_Back:
                    extends: http://vwf.example.com/types/node3
                    children:
                      LCD_BackMaterial1:
                        extends: http://vwf.example.com/types/material
                        properties:
                          texture: ""
                  BeltClip_1:
                    extends: http://vwf.example.com/types/node3
                    properties: 
                      playing: false
                      looping: false
                      speed: 1
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info("=====||====== BeltClip_1.pointerClick()"); 
                          this.playing = !this.playing 
                        }
                      type: application/javascript
                    children:
                      BeltClip:
                        extends: http://vwf.example.com/types/node3
                        children:
                          bone25:
                            extends: http://vwf.example.com/types/node3
                            children:
                              bone25Material1:
                                extends: http://vwf.example.com/types/material
                              bone25Material2:
                                extends: http://vwf.example.com/types/material
                      BeltClipBase:
                        extends: http://vwf.example.com/types/node3
                        children:
                          bone27:
                            extends: http://vwf.example.com/types/node3
                            children:
                              bone27Material1:
                                extends: http://vwf.example.com/types/material
                      BeltClip_Latch:
                        extends: http://vwf.example.com/types/node3
                        properties: 
                          playing: false
                          looping: false
                          speed: 1
                        scripts:
                        - text: |
                            this.pointerClick = function() {
                              console.info("=====||====== BeltClip_Latch.pointerClick()");
                              this.playing = !this.playing 
                            }
                          type: application/javascript 
                        children:
                          BeltClipTab:
                            extends: http://vwf.example.com/types/node3
                            children:
                              bone30:
                                extends: http://vwf.example.com/types/node3
                                children:
                                  bone30Material1:
                                    extends: http://vwf.example.com/types/material
                  Battery:
                    extends: http://vwf.example.com/types/node3
                    properties: 
                      playing: false
                      looping: false
                      speed: 1
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info("=====||====== Battery.pointerClick()"); 
                          this.playing = !this.playing 
                        }
                      type: application/javascript 
                    children:
                      ic40Battery:
                        extends: http://vwf.example.com/types/node3
                        children:
                          bone33:
                            extends: http://vwf.example.com/types/node3
                            children:
                              bone33Material1:
                                extends: http://vwf.example.com/types/material
                              bone33Material2:
                                extends: http://vwf.example.com/types/material
                              bone33Material3:
                                extends: http://vwf.example.com/types/material
                              bone33Material4:
                                extends: http://vwf.example.com/types/material
                              bone33Material5:
                                extends: http://vwf.example.com/types/material
                              bone33Material6:
                                extends: http://vwf.example.com/types/material
                  BatteryLatch:
                    extends: http://vwf.example.com/types/node3
                    properties: 
                      playing: false
                      looping: false
                      speed: 1
                    scripts:
                    - text: |
                        this.pointerClick = function() {
                          console.info( "=====||====== BatteryLatch.pointerClick()" );
                          this.playing = !this.playing 
                        }
                      type: application/javascript
                    children:
                      ic40BatteryLatch:
                        extends: http://vwf.example.com/types/node3
                        children:
                          ic40BatteryLatchMaterial1:
                            extends: http://vwf.example.com/types/material
                          ic40BatteryLatchMaterial2:
                            extends: http://vwf.example.com/types/material
                  ic40Radio:
                    extends: http://vwf.example.com/types/node3
                    children:
                      bone37:
                        extends: http://vwf.example.com/types/node3
                        children:
                          bone37Material1:
                            extends: http://vwf.example.com/types/material
                          bone37Material2:
                            extends: http://vwf.example.com/types/material
                          bone37Material3:
                            extends: http://vwf.example.com/types/material
                          bone37Material4:
                            extends: http://vwf.example.com/types/material
                          bone37Material5:
                            extends: http://vwf.example.com/types/material
                          bone37Material6:
                            extends: http://vwf.example.com/types/material
                          bone37Material7:
                            extends: http://vwf.example.com/types/material
                          bone37Material8:
                            extends: http://vwf.example.com/types/material
                          bone37Material9:
                            extends: http://vwf.example.com/types/material
                          bone37Material10:
                            extends: http://vwf.example.com/types/material
                          bone37Material11:
                            extends: http://vwf.example.com/types/material
                          bone37Material12:
                            extends: http://vwf.example.com/types/material
                          bone37Material13:
                            extends: http://vwf.example.com/types/material
                          bone37Material14:
                            extends: http://vwf.example.com/types/material
              ic40Antennae:
                extends: http://vwf.example.com/types/node3
                scripts:
                - text: |
                    this.ic40Antennae = function() {
                      console.info( "=====||====== ic40Antennae.pointerClick()" );
                      this.parent.parent.parent.parent.anteanna = !this.parent.parent.parent.parent.anteanna; 
                    }
                  type: application/javascript 
                children:
                  ic40AntennaeMaterial1:
                    extends: http://vwf.example.com/types/material
                  ic40AntennaeMaterial2:
                    extends: http://vwf.example.com/types/material
                  ic40AntennaeMaterial3:
                    extends: http://vwf.example.com/types/material
                  ic40AntennaeMaterial4:
                    extends: http://vwf.example.com/types/material
  maincamera: 
    extends: http://vwf.example.com/types/camera
    properties: 
      allowMouseNav: false
      walkMode: "walk"
      cameraType: "perspective"
      orbitPoint: [ 0, 0, 0 ]      
      position: [ 0, 0, 0 ]
      eulers: [ 0, 0, 0 ]
      worldPosition: [ 0, 0, 0 ]
      worldEulers: [ 0, 0, 0 ]
      attachNodeID: ""
      attachOffest: [ 0, 0, 0 ]
      far: 1000.0
      near: 0.1
      fovy: 35
      aspect: 1.0
      orthoscale: 5
      speed: 2.0
  Omni01:
    extends: http://vwf.example.com/types/light
    properties:
      lightType: "point"
      constantAttenuation: 1
      linearAttenuation: 0.002
      quadraticAttenuation: 0.0008
      spotCosCutOff: 0.95
      spotExponent: 10
      diffuse: true 
      specular: true
      samples: 0
      softness: 0.01
      bufferHeight: 256
      bufferWidth: 256
      shadowBias: 2.0
      distance: 100.0
      castShadows: false
scripts:
- text: |
    this.initialize = function() {
        this["radio.dae"].position = this["radio.dae"].position;
        this["radio.dae"].eulers = this["radio.dae"].eulers;
    }
  type: application/javascript
